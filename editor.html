<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ProBuild - Editor</title>
  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõ†Ô∏è</text></svg>">
  <!-- Preconnect to Google Fonts for faster loading -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!-- Google Fonts - Add Roboto Mono for code editor -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <!-- CSS -->
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/editor.css">
  <link rel="stylesheet" href="css/dialog.css">
  <link rel="stylesheet" href="css/notifications.css">
  <link rel="stylesheet" href="css/component-preview.css">
  <link rel="stylesheet" href="css/blocks-editor.css">
  <link rel="stylesheet" href="css/code-editor.css">
  <link rel="stylesheet" href="css/build-manager.css">
  <!-- Blockly Core via CDN - Updated sources -->
  <script src="https://cdn.jsdelivr.net/npm/blockly@9.3.3/blockly_compressed.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/blockly@9.3.3/blocks_compressed.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/blockly@9.3.3/javascript_compressed.js"></script>
  <!-- English Language File -->
  <script src="https://cdn.jsdelivr.net/npm/blockly@9.3.3/msg/en.js"></script>
  
  <!-- Verify Blockly is loaded -->
  <script>
    window.addEventListener('DOMContentLoaded', function() {
      if (typeof Blockly === 'undefined') {
        console.error('Blockly failed to load. Please check your internet connection or try reloading the page.');
        alert('Error: Blockly library failed to load properly. The app may not function correctly.');
      } else {
        console.log('Blockly successfully loaded:', Blockly.VERSION);
      }
      
      // Handle undefined URLs causing 404 errors
      window.addEventListener('error', function(e) {
        const target = e.target;
        // Check if it's a resource load error
        if (target && (target.nodeName === 'IMG' || target.nodeName === 'SCRIPT' || target.nodeName === 'LINK')) {
          const url = target.src || target.href;
          if (url && url.includes('undefined')) {
            console.warn('Prevented load of resource with undefined URL:', url);
            e.preventDefault();
            e.stopPropagation();
            // Fix the element
            if (target.nodeName === 'IMG') {
              target.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=';
            }
            return true;
          }
        }
      }, true);
    });
  </script>
</head>
<body>
  <!-- Content will be dynamically generated by JavaScript -->
  
  <div id="app-root"></div>
  
  <script type="module">
    import EditorView from './js/editor/EditorView.js';
    
    document.addEventListener('DOMContentLoaded', () => {
      new EditorView();
    });
  </script>
</body>
</html> 